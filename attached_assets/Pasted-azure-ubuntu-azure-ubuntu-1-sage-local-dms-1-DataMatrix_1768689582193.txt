azure-ubuntu@azure-ubuntu-1:~/sage-local-dms$ # 1. DataMatrix-Inhalt eines Dokuments analysieren
docker-compose exec web python manage.py shell -c "
from dms.tasks import extract_employee_from_datamatrix
from dms.models import Document

# Letztes Dokument mit Status REVIEW_NEEDED
doc = Document.objects.filter(status='REVIEW_NEEDED').order_by('-created_at').first()
if doc:
    print(f'Dokument: {doc.original_filename[:50]}')
    result = extract_employee_from_datamatrix(doc.file_path)
    print(f'DataMatrix gefunden: {len(result[\"codes\"])} Codes')
    print(f'Employee IDs: {result[\"employee_ids\"]}')
    print(f'Mandant: {result[\"mandant_code\"]}')
    print(f'Rohdaten: {result[\"codes\"]}')
"

# 2. Mitarbeiter-IDs in der Datenbank prüfen
docker-compose exec web python manage.py shell -c "
from dms.models import Employee
for emp in Employee.objects.all()[:20]:
    print(f'{emp.employee_id}: {emp.first_name} {emp.last_name} (Tenant: {emp.tenant.code if emp.tenant else \"None\"})')
"
36 objects imported automatically (use -v 2 for details).

Dokument: Korrekturlohnscheine (6. Korrektur)17012026_184512
Traceback (most recent call last):
  File "/app/manage.py", line 22, in <module>
    main()
  File "/app/manage.py", line 18, in main
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python3.11/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python3.11/site-packages/django/core/management/__init__.py", line 436, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python3.11/site-packages/django/core/management/base.py", line 420, in run_from_argv
    self.execute(*args, **cmd_options)
  File "/usr/local/lib/python3.11/site-packages/django/core/management/base.py", line 464, in execute
    output = self.handle(*args, **options)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/core/management/commands/shell.py", line 247, in handle
    exec(options["command"], {**globals(), **self.get_namespace(**options)})
  File "<string>", line 9, in <module>
AttributeError: 'Document' object has no attribute 'file_path'
36 objects imported automatically (use -v 2 for details).

1_6: Nico Battorra (Tenant: None)
1_7: Fabian Cerwinski (Tenant: None)
1_5: Marco Gehlhaus (Tenant: None)
1_3: Marvin Groß (Tenant: None)
1_2: Heike Hengl (Tenant: None)
1_9: Lukas Hengl (Tenant: None)
1_1: Martin Hengl (Tenant: None)
1_8: Tobias Poldervaart (Tenant: None)
1_4: Markus Scholl (Tenant: None)
azure-ubuntu@azure-ubuntu-1:~/sage-local-dms$ 